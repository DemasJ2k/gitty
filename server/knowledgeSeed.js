export const preloadedKnowledge = [
  {
    title: "ICT - Order Blocks",
    content: `Order Blocks are institutional footprints in the market, representing areas where smart money has placed significant orders.

KEY CONCEPTS:
- Bullish Order Block: Last down candle before a strong up move. Smart money accumulated buy orders here.
- Bearish Order Block: Last up candle before a strong down move. Smart money distributed sell orders here.

IDENTIFICATION:
1. Look for displacement - a strong, impulsive move away from a consolidation area
2. Mark the last opposing candle before the displacement
3. Draw a zone from the candle's body (can include wick for aggressive entries)

TRADING ORDER BLOCKS:
- Wait for price to return to the order block zone
- Look for confirmation (rejection wick, engulfing pattern)
- Enter with stop loss beyond the order block
- Target previous swing high/low or the next opposing order block

CONFLUENCE FACTORS:
- Order blocks at premium/discount zones (50% Fibonacci)
- Aligning with higher timeframe structure
- Near significant liquidity pools
- During high-probability trading sessions (London, NY open)

COMMON MISTAKES:
- Trading every order block without context
- Ignoring higher timeframe bias
- Not waiting for confirmation at the zone`,
    summary: "ICT Order Blocks are institutional trading zones where smart money places significant orders, used as entry points when price returns to these levels.",
    category: "ICT Concepts",
    tags: ["order-blocks", "institutional", "smart-money", "entries"]
  },
  {
    title: "ICT - Fair Value Gaps (FVG)",
    content: `Fair Value Gaps are inefficiencies in price action created when candles do not overlap, leaving gaps that price tends to fill.

DEFINITION:
A FVG occurs when a 3-candle sequence shows a gap between the first and third candle's wicks. The middle candle's body represents displacement.

BULLISH FVG:
- Middle candle moves strongly upward
- Gap exists between Candle 1's high and Candle 3's low
- Acts as potential support when price returns

BEARISH FVG:
- Middle candle moves strongly downward  
- Gap exists between Candle 1's low and Candle 3's high
- Acts as potential resistance when price returns

TRADING FVGs:
1. Identify the gap after strong displacement
2. Mark the zone (conservative: candle bodies only; aggressive: include wicks)
3. Wait for price to return to the gap
4. Enter when gap is partially or fully filled (50% of gap = common entry)
5. Stop loss: Beyond the FVG zone
6. Take profit: Opposing liquidity pool or next FVG

PROBABILITY ENHANCERS:
- FVGs in direction of higher timeframe trend
- Located at premium/discount levels
- Created during high-volume sessions
- Multiple FVGs stacking in same direction

FVG RESPECT LEVELS:
- Consequent Encroachment: 50% of the FVG
- Full gap fill: 100% retracement through gap`,
    summary: "Fair Value Gaps are price inefficiencies between candles that act as magnets, with price tending to return and fill these gaps.",
    category: "ICT Concepts", 
    tags: ["fvg", "fair-value-gap", "imbalance", "price-action"]
  },
  {
    title: "ICT - Liquidity Concepts",
    content: `Liquidity represents resting orders in the market. Smart money hunts these pools before reversing price.

TYPES OF LIQUIDITY:

Buy-Side Liquidity (BSL):
- Stop losses of short positions
- Buy stops above swing highs
- Smart money targets these to fill large sell orders

Sell-Side Liquidity (SSL):
- Stop losses of long positions
- Sell stops below swing lows
- Smart money targets these to fill large buy orders

LIQUIDITY ZONES:
1. Equal Highs/Lows - Multiple touches at same level create obvious liquidity
2. Swing Points - Any clear high or low becomes a target
3. Session Highs/Lows - Daily, weekly, monthly extremes
4. Psychological Levels - Round numbers (1.3000, 50,000)

THE LIQUIDITY GRAB:
1. Price sweeps above/below a liquidity pool
2. Stop losses are triggered
3. Smart money fills their orders
4. Price reverses in the opposite direction

TRADING LIQUIDITY:
- Identify where liquidity rests (swing highs/lows, equal levels)
- Wait for liquidity to be swept (wick through level)
- Look for reversal confirmation (order block entry, FVG fill)
- Target the opposing liquidity pool

JUDAS SWING:
A fake move to grab liquidity before the real move. Common at session opens:
- London Open: Sweeps Asian session high/low before trending
- NY Open: Sweeps London session high/low before continuing`,
    summary: "Liquidity pools are clusters of stop orders that smart money targets before reversing price direction.",
    category: "ICT Concepts",
    tags: ["liquidity", "stop-hunt", "smart-money", "sweeps"]
  },
  {
    title: "ICT - Market Structure",
    content: `Market structure defines the framework of price movement through swing highs and lows.

BULLISH STRUCTURE:
- Higher Highs (HH) and Higher Lows (HL)
- Each swing high exceeds the previous
- Each swing low is above the previous swing low
- Trend continuation expected until structure breaks

BEARISH STRUCTURE:
- Lower Highs (LH) and Lower Lows (LL)
- Each swing high is below the previous
- Each swing low exceeds the previous low
- Trend continuation expected until structure breaks

BREAK OF STRUCTURE (BOS):
- Bullish BOS: Price breaks above previous swing high
- Bearish BOS: Price breaks below previous swing low
- Confirms trend continuation
- Not a reversal signal

CHANGE OF CHARACTER (CHoCH):
- Bullish CHoCH: In downtrend, price breaks above swing high
- Bearish CHoCH: In uptrend, price breaks below swing low
- First sign of potential reversal
- Wait for confirmation before trading

MULTI-TIMEFRAME STRUCTURE:
- Daily/Weekly: Establish overall bias
- 4H: Identify trading direction
- 1H/15M: Find entries within the bias
- Lower timeframes within higher timeframe structure = highest probability

PREMIUM VS DISCOUNT:
- Draw Fibonacci from swing low to swing high
- Above 50% = Premium Zone (look for sells)
- Below 50% = Discount Zone (look for buys)
- Trade in direction of bias from appropriate zone`,
    summary: "Market structure analysis identifies trend direction through swing highs/lows, with BOS confirming trends and CHoCH signaling potential reversals.",
    category: "ICT Concepts",
    tags: ["market-structure", "trend", "bos", "choch"]
  },
  {
    title: "ICT - Optimal Trade Entry (OTE)",
    content: `The Optimal Trade Entry is a Fibonacci-based entry technique using the 62-79% retracement zone.

THE OTE ZONE:
- Located between 62% and 79% Fibonacci retracement
- Sweet spot: 70.5% level (also called the "OTE")
- Represents optimal risk-to-reward entry point

HOW TO USE OTE:

For Bullish Entries:
1. Identify a swing low to swing high move
2. Wait for price to retrace
3. Draw Fibonacci from swing low to swing high
4. Enter longs between 62-79% retracement
5. Stop loss below swing low
6. Target new swing high or beyond

For Bearish Entries:
1. Identify a swing high to swing low move
2. Wait for price to retrace
3. Draw Fibonacci from swing high to swing low
4. Enter shorts between 62-79% retracement
5. Stop loss above swing high
6. Target new swing low or beyond

CONFLUENCE WITH OTE:
- Order block within OTE zone = higher probability
- FVG within OTE zone = higher probability
- Multiple timeframe OTE alignment = highest probability

KEY FIBONACCI LEVELS:
- 50% - Equilibrium/CE (Change of State)
- 62% - Start of OTE zone
- 70.5% - Optimal Trade Entry level
- 79% - End of OTE zone / Deep retracement

TIPS:
- Don't chase entries outside OTE zone
- Combine with time-based entries (session opens)
- Higher timeframe OTE > Lower timeframe OTE`,
    summary: "The OTE is a Fibonacci retracement zone between 62-79% that provides optimal risk-reward entries aligned with institutional trading.",
    category: "ICT Concepts",
    tags: ["ote", "fibonacci", "entries", "retracement"]
  },
  {
    title: "Scalping - Core Principles",
    content: `Scalping is a short-term trading strategy that aims to profit from small price movements, typically holding positions for seconds to minutes.

CORE CHARACTERISTICS:
- High frequency of trades (10-100+ per session)
- Small profit targets (5-20 pips in Forex, $10-50 in stocks)
- Tight stop losses (equal to or smaller than target)
- Focus on highly liquid markets
- Requires constant screen time

BEST MARKETS FOR SCALPING:
- Forex majors: EUR/USD, GBP/USD, USD/JPY
- Crypto: BTC/USD, ETH/USD (high volatility)
- Stocks: Large caps with high volume
- Indices: S&P 500, NASDAQ during US session

IDEAL CONDITIONS:
- High liquidity periods (session overlaps)
- Moderate volatility (not too choppy, not flat)
- Clear micro-structure (visible support/resistance)
- Avoid major news events (unpredictable spikes)

SCALPING TIMEFRAMES:
- Primary: 1-minute, 5-minute charts
- Context: 15-minute, 1-hour for bias
- Execution: Tick charts or 1-minute

RISK MANAGEMENT:
- Risk 0.5-1% per trade maximum
- Daily loss limit: 2-3% of account
- Win rate target: 55-65%
- Risk-reward: 1:1 to 1:1.5 typical

MENTAL REQUIREMENTS:
- Fast decision making
- Emotional discipline (quick losses accepted)
- Focus and concentration
- No revenge trading`,
    summary: "Scalping captures small price movements with high-frequency trades, requiring discipline, speed, and strict risk management.",
    category: "Scalping",
    tags: ["scalping", "short-term", "high-frequency", "day-trading"]
  },
  {
    title: "Scalping - Entry Techniques",
    content: `Effective scalping entries require precision timing and clear rules for execution.

BREAKOUT SCALPING:
1. Identify tight consolidation (range compression)
2. Mark the high and low of the range
3. Enter on break above/below with momentum
4. Stop loss: Opposite side of range
5. Target: 1:1 or trailing with structure

PULLBACK SCALPING:
1. Identify strong momentum move
2. Wait for minor pullback (2-5 candles)
3. Enter on first sign of resumption
4. Stop loss: Beyond pullback low/high
5. Target: New momentum high/low

ORDER FLOW SCALPING:
1. Watch Level 2/DOM for large orders
2. Enter when large orders absorb selling/buying
3. Ride with institutional flow
4. Exit at first sign of exhaustion

MEAN REVERSION SCALPING:
1. Identify overextension from VWAP or moving average
2. Wait for extreme reading (2+ std deviations)
3. Enter for snap-back to mean
4. Stop loss: Further extension
5. Target: Return to VWAP/MA

SCALPING INDICATORS:
- VWAP: Institutional benchmark
- RSI (14): Overbought/oversold extreme
- Bollinger Bands: Volatility squeeze/expansion
- Volume: Confirmation of moves
- EMA 9/21: Micro trend direction

EXECUTION TIPS:
- Use limit orders when possible (save spread)
- Have hotkeys for instant entry/exit
- Practice in demo until consistent
- Journal every trade for pattern recognition`,
    summary: "Scalping entries include breakouts, pullbacks, order flow reading, and mean reversion with fast execution being critical.",
    category: "Scalping",
    tags: ["scalping", "entries", "breakout", "pullback"]
  },
  {
    title: "Swing Trading - Fundamentals",
    content: `Swing trading captures medium-term price swings, holding positions from days to weeks.

CORE CHARACTERISTICS:
- Position duration: 2 days to 4 weeks
- Lower frequency: 2-10 trades per month
- Larger profit targets (100-500 pips Forex)
- Wider stop losses for market noise
- Suitable for part-time traders

ADVANTAGES:
- Less screen time required
- Lower stress than day trading
- Better risk-reward potential (1:2 to 1:5)
- Catches major market moves
- Works with full-time job schedule

BEST MARKETS:
- All Forex pairs (especially trending pairs)
- Stocks: Growth and momentum stocks
- Crypto: All major cryptocurrencies
- Commodities: Gold, Oil, Silver

TIMEFRAME APPROACH:
- Weekly: Overall market direction
- Daily: Trade setup identification
- 4-Hour: Entry refinement
- Avoid: 1-minute, 5-minute charts

SWING TRADING STYLES:
1. Trend Following: Trade with the trend, buy pullbacks
2. Breakout Trading: Enter on breakouts of key levels
3. Reversal Trading: Catch major trend changes
4. Range Trading: Buy support, sell resistance

POSITION SIZING:
- Risk 1-2% per trade
- Account for overnight gaps
- Scale in/out for larger positions
- Adjust for volatility (ATR-based)`,
    summary: "Swing trading captures multi-day price moves with less screen time, making it suitable for part-time traders seeking larger moves.",
    category: "Swing Trading",
    tags: ["swing-trading", "medium-term", "position-trading", "trends"]
  },
  {
    title: "Swing Trading - Setup Examples",
    content: `High-probability swing trading setups that consistently perform across markets.

FLAG PATTERN:
1. Strong impulsive move (pole)
2. Consolidation against the trend (flag)
3. Enter on breakout from flag
4. Stop: Below flag low (bull) or above flag high (bear)
5. Target: Measure pole, project from breakout

DOUBLE BOTTOM/TOP:
1. First bottom/top forms
2. Rally/decline (neckline forms)
3. Second bottom/top at similar level
4. Break above/below neckline = entry
5. Target: Height of pattern projected

ASCENDING/DESCENDING TRIANGLE:
1. Flat resistance/support with rising/falling opposite
2. Multiple touches to both sides
3. Enter on breakout with volume
4. Target: Width of triangle projected

PULLBACK TO MOVING AVERAGE:
1. Strong trend established (ADX > 25)
2. Price pulls back to 20 or 50 EMA
3. Enter on bounce from MA with trend
4. Stop: Beyond MA (with buffer)
5. Target: Previous swing or trailing

FIBONACCI RETRACEMENT:
1. Identify strong swing move
2. Draw Fibonacci levels
3. Wait for 38.2%, 50%, or 61.8% retracement
4. Enter with reversal confirmation
5. Target: New swing high/low

CHECKLIST BEFORE ENTRY:
- Trend aligned on higher timeframe
- Clear support/resistance structure
- Volume confirms the setup
- Risk-reward minimum 1:2
- No major news in next 24 hours`,
    summary: "Common swing trading setups include flags, double tops/bottoms, triangles, MA pullbacks, and Fibonacci retracements.",
    category: "Swing Trading",
    tags: ["swing-trading", "patterns", "setups", "chart-patterns"]
  },
  {
    title: "Risk Management Essentials",
    content: `Risk management is the foundation of profitable trading. Without it, even the best strategy will fail.

THE 1-2% RULE:
- Never risk more than 1-2% of account per trade
- Allows for losing streaks without account damage
- Example: $10,000 account = $100-200 max risk per trade

POSITION SIZE CALCULATION:
Position Size = (Account * Risk %) / (Entry - Stop Loss)

Example:
- Account: $10,000
- Risk: 1% = $100
- Entry: $50
- Stop Loss: $48
- Position: $100 / ($50 - $48) = 50 shares

RISK-REWARD RATIO:
- Minimum acceptable: 1:1
- Recommended: 1:2 or higher
- Calculate before entering trade
- If R:R not favorable, skip the trade

STOP LOSS RULES:
1. Always use a stop loss
2. Place based on technicals, not random distance
3. Never move stop further from entry
4. Trailing stops: Move only in profit direction

DAILY/WEEKLY LIMITS:
- Daily loss limit: 3% of account
- Weekly loss limit: 5-7% of account
- Stop trading when limit hit
- Review and reset mindset

CORRELATION RISK:
- Avoid similar positions across correlated pairs
- EUR/USD and GBP/USD are highly correlated
- BTC and altcoins often move together
- Treat correlated positions as one trade

LEVERAGE GUIDELINES:
- Forex: Maximum 10:1 for retail
- Crypto: 2-3x maximum for spot
- Stocks: Avoid leverage for beginners
- Less leverage = more margin for error`,
    summary: "Risk management through position sizing, stop losses, and trade limits protects capital and ensures long-term trading survival.",
    category: "Trading Fundamentals",
    tags: ["risk-management", "position-sizing", "stop-loss", "fundamentals"]
  },
  {
    title: "Trading Psychology",
    content: `Trading psychology determines 70-80% of trading success. Master your mind to master the markets.

THE BIG EMOTIONS:
Fear - Prevents entries, causes early exits
Greed - Overleveraging, not taking profits
Hope - Holding losers, expecting reversal
Revenge - Trading to recover losses

DEVELOPING DISCIPLINE:
1. Trade your plan, not your emotions
2. Accept losses as business expenses
3. Focus on process, not outcome
4. Limit daily screen time
5. Regular breaks during sessions

OVERCOMING FEAR:
- Use proper position sizing (smaller = less fear)
- Accept the risk before entering
- Focus on probabilities, not single trades
- Review winning trades for confidence

MANAGING GREED:
- Set profit targets before entry
- Use partial take-profits
- Never double position size after wins
- Celebrate consistency, not big wins

AVOIDING REVENGE TRADING:
- Set daily loss limits and respect them
- Take break after 2 consecutive losses
- Return only when emotionally calm
- Review losses objectively later

BUILDING CONFIDENCE:
- Start with demo until consistent
- Graduate to small live size
- Increase size only with proven results
- Keep detailed trading journal
- Focus on win rate improvement

THE TRADING JOURNAL:
Every trade should record:
- Entry and exit levels
- Reason for trade
- Emotional state during trade
- What went right/wrong
- Lesson learned`,
    summary: "Trading psychology involves managing fear, greed, and discipline - the mental foundation that determines long-term success.",
    category: "Trading Fundamentals",
    tags: ["psychology", "emotions", "discipline", "mindset"]
  },
  {
    title: "Technical Analysis Basics",
    content: `Technical analysis uses price charts and indicators to identify trading opportunities.

PRICE ACTION FUNDAMENTALS:
- Support: Level where buying emerges
- Resistance: Level where selling emerges
- Trend: Direction of overall price movement
- Breakout: Price moves beyond key level

CANDLESTICK PATTERNS:

Reversal Patterns:
- Hammer/Hanging Man: Rejection of prices
- Engulfing: Strong reversal signal
- Doji: Indecision, potential reversal
- Morning/Evening Star: Three-candle reversal

Continuation Patterns:
- Three White Soldiers/Black Crows
- Rising/Falling Three Methods
- Spinning Top in trend context

CHART PATTERNS:
Reversal: Head & Shoulders, Double Top/Bottom
Continuation: Flags, Pennants, Triangles
Bilateral: Symmetrical Triangles, Rectangles

ESSENTIAL INDICATORS:

Trend Indicators:
- Moving Averages (20, 50, 200 EMA/SMA)
- MACD (Moving Average Convergence Divergence)
- ADX (Average Directional Index)

Momentum Indicators:
- RSI (Relative Strength Index)
- Stochastic Oscillator
- CCI (Commodity Channel Index)

Volume Indicators:
- Volume bars
- OBV (On-Balance Volume)
- Volume Profile

MULTI-TIMEFRAME ANALYSIS:
1. Higher TF: Identify overall trend
2. Middle TF: Find trade setups
3. Lower TF: Time entries precisely

Confluence = multiple factors aligning = higher probability`,
    summary: "Technical analysis uses price action, candlestick patterns, chart patterns, and indicators to identify high-probability trading opportunities.",
    category: "Trading Fundamentals",
    tags: ["technical-analysis", "indicators", "patterns", "basics"]
  }
];

export async function seedKnowledgeBase(storage, userId) {
  const existingTitles = await storage.getAllKnowledgeTitles(userId);
  const existingTitlesSet = new Set(existingTitles);
  
  const docsToCreate = preloadedKnowledge.filter(doc => !existingTitlesSet.has(doc.title));
  
  for (const doc of docsToCreate) {
    await storage.createKnowledgeDocument({
      ...doc,
      userId,
    });
  }
  
  return docsToCreate.length;
}
